{"version":3,"file":"index.js","sources":["../src/enum/index.ts","../src/index.ts"],"sourcesContent":["//字典 Dictionaries    expire过期时间key    permanent永久不过期\nexport enum Dictionaries {\n\texpire = '__expire__',\n\tpermanent = 'permanent'\n}\n","import { StorageCls, Key, expire, Data, Result } from './type/index'\nimport { Dictionaries } from './enum/index'\n\nexport class Storage implements StorageCls {\n\t//\n\tpublic set<T = any>(key: Key, value: T, expire: expire) {\n\t\t// 格式化数据\n\t\tconst data = {\n\t\t\tvalue,\n\t\t\t[Dictionaries.expire]: expire\n\t\t}\n\t\tlocalStorage.setItem(key, JSON.stringify(data))\n\t}\n\tpublic get<T = any>(key: Key): Result<T | null> {\n\t\tconst value = localStorage.getItem(key)\n\t\t//判断值是否有效\n\t\tif (value) {\n\t\t\tconst obj: Data<T> = JSON.parse(value)\n\t\t\tconst now = new Date().getTime()\n\t\t\t// 过期提示\n\t\t\tif (typeof obj[Dictionaries.expire] === 'number' && obj[Dictionaries.expire] < now) {\n\t\t\t\tthis.remove(key)\n\t\t\t\treturn {\n\t\t\t\t\tmessage: `${key}已过期`,\n\t\t\t\t\tvalue: null\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tmessage: '成功读取',\n\t\t\t\t\tvalue: obj.value\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// key 无效\n\t\t\tconsole.warn(`${key}无效`)\n\t\t\treturn {\n\t\t\t\tmessage: `${key}无效`,\n\t\t\t\tvalue: null\n\t\t\t}\n\t\t}\n\t}\n\tpublic remove(key: Key) {\n\t\tlocalStorage.removeItem(key)\n\t}\n\tpublic clear(key: Key) {\n\t\tlocalStorage.clear()\n\t}\n}\n"],"names":["Dictionaries","Storage","set","key","value","expire","data","localStorage","setItem","JSON","stringify","get","getItem","obj","parse","now","Date","getTime","this","remove","message","console","warn","removeItem","clear"],"mappings":"AACA,IAAYA,GAAZ,SAAYA,GACXA,EAAA,OAAA,aACAA,EAAA,UAAA,WACA,CAHD,CAAYA,IAAAA,EAGX,CAAA,UCDYC,EAELC,IAAaC,EAAUC,EAAUC,GAEvC,MAAMC,EAAO,CACZF,QACA,CAACJ,EAAaK,QAASA,GAExBE,aAAaC,QAAQL,EAAKM,KAAKC,UAAUJ,GACzC,CACMK,IAAaR,GACnB,MAAMC,EAAQG,aAAaK,QAAQT,GAEnC,GAAIC,EAAO,CACV,MAAMS,EAAeJ,KAAKK,MAAMV,GAC1BW,GAAM,IAAIC,MAAOC,UAEvB,MAAwC,iBAA7BJ,EAAIb,EAAaK,SAAwBQ,EAAIb,EAAaK,QAAUU,GAC9EG,KAAKC,OAAOhB,GACL,CACNiB,QAAS,GAAGjB,OACZC,MAAO,OAGD,CACNgB,QAAS,OACThB,MAAOS,EAAIT,MAGb,CAGA,OADAiB,QAAQC,KAAK,GAAGnB,OACT,CACNiB,QAAS,GAAGjB,MACZC,MAAO,KAGT,CACMe,OAAOhB,GACbI,aAAagB,WAAWpB,EACxB,CACMqB,MAAMrB,GACZI,aAAaiB,OACb"}